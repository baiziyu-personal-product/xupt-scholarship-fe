import{r as e,C as h,E as D,W as m,X as A,Y as B,e as x,Z as y,_ as k,$ as C,m as S}from"./vendor-53f28a41.js";import{S as I,A as T,g as L}from"./index-eddbdc42.js";import{u as j,a as w}from"./index-74bab682.js";import"./index-7658ac5f.js";import"./index-9818c93d.js";import"./time-a4cc2158.js";import"./page-header-95e1440f.js";const M=()=>{const[a,r]=e.exports.useState([]);return e.exports.createElement(h,null,a.length?e.exports.createElement(m,{mode:"left"},a.map(s=>e.exports.createElement(m.Item,{key:s.time,label:s.time},s.info))):e.exports.createElement(D,null))},v=new Map([["save","\u5DF2\u4FDD\u5B58"],["submit","\u5DF2\u63D0\u4EA4"],["success","\u5DF2\u9A8C\u8BC1"],["failed","\u672A\u9A8C\u8BC1"]]),H=(a,r)=>[{title:"\u8868\u5355ID",dataIndex:"id",key:"id"},{title:"\u5F53\u524D\u72B6\u6001",dataIndex:"handle_state",key:"handle_state",render:s=>e.exports.createElement(A,{color:s==="submit"?"success":"geekblue"},v.get(s))},{title:"\u5B66\u53F7",dataIndex:"user_id",key:"user_id"},{title:"\u5F97\u5206",dataIndex:"score",key:"score"},{title:"\u6700\u8FD1\u8BC4\u5BA1\u4EBA\u5DE5\u53F7",dataIndex:"comment_user",key:"comment_user"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"create_at",dataIndex:"create_at"},{title:"\u66F4\u65B0\u65F6\u95F4",key:"edit_at",dataIndex:"edit_at"},{title:"\u64CD\u4F5C",key:"action",render:(s,n)=>n.editable&&a!=="manager"?e.exports.createElement(B,{to:`/apply/form/${n.id}`,state:{showScore:!0}},e.exports.createElement(x,{shape:"round",icon:e.exports.createElement(y,null)},"\u4FEE\u6539\u8BC4\u5206")):e.exports.createElement(x,{type:"dashed",shape:"round",onClick:()=>r(n.id),icon:e.exports.createElement(y,null)},"\u5BA1\u6838")}],V=()=>{const{user:a}=j(),[r,s]=e.exports.useState([]),[n,i]=e.exports.useState(!1),[_,c]=e.exports.useState(!1),[u,d]=e.exports.useState(-1),{process_id:E}=w(),p=o=>{c(!0),d(o)},F=()=>{c(!1),d(-1)},f=e.exports.useMemo(()=>H(a.identity,p),[a.identity,p]),g=async()=>{try{i(!0);const b=(await L({page_count:10,page_index:1,is_check:a.identity,procedure_id:E})||[]).map(t=>({key:t.id,id:t.id,create_at:t.create_at,edit_at:t.edit_at,handle_state:t.status,score_info:t.score_info,score:t.score,user_id:t.user_id,comment_user:t.step.user_id,editable:t.editable}));s(b)}catch(o){console.log(o),S.error("\u83B7\u53D6\u7533\u8BF7\u5217\u8868\u5931\u8D25")}finally{i(!1)}},l=e.exports.useMemo(()=>r.find(o=>o.id===u),[r,u]);return e.exports.useEffect(()=>{g()},[]),e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(k,{onClose:F,visible:_,width:992,headerStyle:{height:48,padding:20},bodyStyle:{padding:"16px 8px"},footer:e.exports.createElement(I,{applyId:u,initValue:l==null?void 0:l.score_info}),footerStyle:{height:80}},e.exports.createElement(T,{commentApplyId:u})),e.exports.createElement(C,{loading:n,columns:f,dataSource:r}))},z=()=>e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(M,null),e.exports.createElement(V,null));export{z as default};
//# sourceMappingURL=index-79078c09.js.map
