var J=Object.defineProperty,K=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var h=(n,t,r)=>t in n?J(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,_=(n,t)=>{for(var r in t||(t={}))G.call(t,r)&&h(n,r,t[r]);if(P)for(var r of P(t))Q.call(t,r)&&h(n,r,t[r]);return n},D=(n,t)=>K(n,W(t));var m=(n,t,r)=>(h(n,typeof t!="symbol"?t+"":t,r),r);import{a as L,q as A,r as e,u as C,b as X,S as y,m as S,N as b,R as Y,c as l,d as v,B as Z,F as x,e as ee,f as te,M as re,D as I,C as se,g as ne,I as T,T as oe,h as O,i as ae,P as ue,j as le,k as ie,l as R,n as ce}from"./vendor-53f28a41.js";const pe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}};pe();const de="modulepreload",w={},me="/xupt-scholarship-fe/",i=function(t,r){return!r||r.length===0?t():Promise.all(r.map(o=>{if(o=`${me}${o}`,o in w)return;w[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":de,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",f)})})).then(()=>t())};class xe{constructor(){m(this,"writeTime");this.writeTime=Number(new Date)}isNotExist(t){return t===null||typeof t=="undefined"}}class Ee extends xe{constructor(t){super();m(this,"prefix");m(this,"setLtg",(t,r,o)=>{this.setStorage({key:t,value:r,expired:o,isLocal:!0})});m(this,"delLtg",t=>(this.delStorage({key:t,isLocal:!0}),t));m(this,"setStg",(t,r,o)=>{this.setStorage({key:t,value:r,expired:o,isLocal:!1})});m(this,"delStg",t=>(this.delStorage({key:t,isLocal:!1}),t));this.prefix=t||""}getLtg(t){return this.getStorage({key:t,isLocal:!0})}getStg(t){return this.getStorage({key:t,isLocal:!1})}setStorage(t){const{value:r,expired:o,isLocal:s,key:a}=t,u=this.prefix+a;let c={value:r,writeTime:this.writeTime,expired:o};s?localStorage.setItem(u,JSON.stringify(c)):sessionStorage.setItem(u,JSON.stringify(c))}getStorage(t){const{isLocal:r,key:o}=t,s=this.prefix+o;let a=null;if(r?a=localStorage.getItem(s):a=sessionStorage.getItem(s),this.isNotExist(a))return null;let u=JSON.parse(a);return this.isNotExist(u.expired)?u.value:this.isOutPeriod(u)?(this.delStorage({key:s,isLocal:r}),null):u.value}delStorage(t){const{isLocal:r,key:o}=t,s=this.prefix+o;r?localStorage.removeItem(s):sessionStorage.removeItem(s)}getStorageUsedSize(){return"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate():Promise.reject(null)}isOutPeriod(t){return t.value?Number(new Date)-t.writeTime>t.expired:!0}}var E=new Ee("st");const g="auth-code",et=2*24*60*60*1e3;class ge{constructor(t){m(this,"instance");this.instance=L.create(t),this.instance.defaults.withCredentials=!0,this.requestInterceptors(),this.responseInterceptors()}cancel(){return L.CancelToken.source()}requestInterceptors(){this.instance.interceptors.request.use(function(t){const r=E.getStg(g);return r!==""&&(t.headers=D(_({},t.headers),{Authorization:"Bearer "+r})),t},function(t){return Promise.reject(t)})}responseInterceptors(){this.instance.interceptors.response.use(function(t){return t.data.code===1?Promise.reject(new Error(t.data.message)):t.status===401?(E.delStg(g),Promise.reject(new Error("\u6CA1\u6709\u6743\u9650"))):t.data.data},function(t){return Promise.reject(t)})}get(t,r,o){const s=A.stringifyUrl({url:t,query:r});return this.instance.get(s,o)}post(t,r,o){return this.instance.post(t,r,o)}put(t,r,o){return this.instance.put(t,r,o)}delete(t,r,o){const s=A.stringifyUrl({url:t,query:r});return this.instance.delete(s,o)}postFormData(t,r){return this.instance.post(t,r,{headers:{"Content-Type":"multipart/form-data;charset=UTF-8"}})}}const p=new ge({baseURL:"/api"}),tt=()=>p.get("/user/list"),fe=()=>p.get("/user"),rt=n=>p.post("/user/update/user/info",n),st=function(n){return p.post("/sign/login",n)},nt=function(n){return p.post("/sign/register",n)},he=function(){return p.get("/sign/out")},B=e.exports.createContext(null),N="/sign",_e="/",ye="/forget-password",Se=[N,ye],be=n=>{const{pathname:t}=C(),r=X(),[o,s]=e.exports.useState({}),[a,u]=e.exports.useState(!1),c=E.getStg(g),f=async()=>{try{u(!0);const d=await fe();s(d)}catch{S.error("\u83B7\u53D6\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F\u5931\u8D25")}finally{u(!1)}};e.exports.useEffect(()=>{!Se.includes(t)&&!o.email&&c&&f()},[t]);const M=async d=>{try{await f(),r(d!=null?d:_e,{replace:!0})}catch(H){console.error(H)}},$=async()=>{try{r(N,{replace:!0}),await he()}catch(d){console.error(d)}finally{s({}),E.delStg(g)}};return e.exports.createElement(B.Provider,{value:{user:o,signIn:M,signOut:$}},e.exports.createElement(y,{spinning:a},n.children))},k=()=>e.exports.useContext(B),ve=["/apply/form"],Fe=["/upload"],Pe=[],De=n=>{const{user:t}=k(),r=E.getStg(g),o=C(),{pathname:s}=o;return[t.identity==="manager"&&ve.includes(s),t.identity==="student"&&Fe.includes(s),t.identity==="student,manager"&&Pe.includes(s)].includes(!0)?(S.warn("\u60A8\u6CA1\u6709\u67E5\u770B\u8BE5\u9875\u9762\u7684\u6743\u9650"),e.exports.createElement(b,{to:"/",replace:!0})):!t.email&&!r?e.exports.createElement(b,{to:"/sign",state:{from:o},replace:!0}):e.exports.createElement(e.exports.Fragment,null,n.children)},Le=n=>e.exports.createElement(y,_({style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},n),n.children),ot=n=>p.post("/process",n),at=n=>p.get(`/process/${n}`),Ae=()=>p.get("/process"),q=e.exports.createContext({}),ut=()=>e.exports.useContext(q),Ce=n=>{const{user:t}=k(),[r,o]=e.exports.useState({status:"not_create",process_id:-1,editable:!0,createable:!0}),[s,a]=e.exports.useState(!1),u=async()=>{try{a(!0);const c=await Ae();o(c)}catch(c){console.error(c.message)}finally{a(!1)}};return e.exports.useEffect(()=>{t.email&&u()},[t.email]),e.exports.createElement(q.Provider,{value:r},e.exports.createElement(y,{spinning:s},n.children))},j=e.exports.lazy(()=>i(()=>import("./index-eddbdc42.js").then(function(n){return n.i}),["static/js/index-eddbdc42.js","static/css/index-9350d754.css","static/js/vendor-53f28a41.js","static/js/index-7658ac5f.js","static/js/index-9818c93d.js","static/js/time-a4cc2158.js","static/js/page-header-95e1440f.js"])),Ie=e.exports.lazy(()=>i(()=>import("./index-79078c09.js"),["static/js/index-79078c09.js","static/js/vendor-53f28a41.js","static/js/index-eddbdc42.js","static/css/index-9350d754.css","static/js/index-7658ac5f.js","static/js/index-9818c93d.js","static/js/time-a4cc2158.js","static/js/page-header-95e1440f.js"])),Te=e.exports.lazy(()=>i(()=>import("./index-019b7fd0.js"),["static/js/index-019b7fd0.js","static/js/vendor-53f28a41.js","static/js/index-35361678.js","static/js/style.module-22f9f897.js","static/css/style.module-e030c2c0.css","static/js/time-a4cc2158.js","static/js/index-ea537b3f.js","static/js/user-list-5942b2ca.js"])),Oe=e.exports.lazy(()=>i(()=>import("./index-ea36f5c6.js"),["static/js/index-ea36f5c6.js","static/css/index-5c5d6c9e.css","static/js/vendor-53f28a41.js","static/js/cx-e5ad65f0.js","static/js/index-9818c93d.js"])),Re=e.exports.lazy(()=>i(()=>import("./index-de54ed99.js"),["static/js/index-de54ed99.js","static/css/index-53a9a584.css","static/js/vendor-53f28a41.js","static/js/style.module-22f9f897.js","static/css/style.module-e030c2c0.css","static/js/user-list-5942b2ca.js","static/js/index-7658ac5f.js","static/js/index-9818c93d.js","static/js/time-a4cc2158.js","static/js/index-35361678.js"])),we=e.exports.lazy(()=>i(()=>import("./index-916af33b.js"),["static/js/index-916af33b.js","static/css/index-58ef9436.css","static/js/vendor-53f28a41.js","static/js/index-4b8eba64.js","static/css/index-d0798fbd.css","static/js/index-9818c93d.js"])),Be=e.exports.lazy(()=>i(()=>import("./index-4aa99cfc.js"),["static/js/index-4aa99cfc.js","static/js/vendor-53f28a41.js"])),Ne=e.exports.lazy(()=>i(()=>import("./index-20c989be.js"),["static/js/index-20c989be.js","static/css/index-9924a72d.css","static/js/page-header-95e1440f.js","static/js/vendor-53f28a41.js","static/js/cx-e5ad65f0.js","static/js/style.module-22f9f897.js","static/css/style.module-e030c2c0.css","static/js/index-ea537b3f.js","static/js/user-list-5942b2ca.js","static/js/menu.config-2b87cff3.js"])),ke=e.exports.lazy(()=>i(()=>import("./index-8b8c900d.js"),["static/js/index-8b8c900d.js","static/css/index-1925d179.css","static/js/vendor-53f28a41.js","static/js/index-48093a60.js","static/css/index-87ac69d9.css","static/js/cx-e5ad65f0.js"])),qe=e.exports.lazy(()=>i(()=>import("./index-b01b03d1.js"),["static/js/index-b01b03d1.js","static/css/index-93aecc91.css","static/js/vendor-53f28a41.js","static/js/menu.config-2b87cff3.js","static/js/index-48093a60.js","static/css/index-87ac69d9.css","static/js/cx-e5ad65f0.js","static/js/index-4b8eba64.js","static/css/index-d0798fbd.css","static/js/index-9818c93d.js","static/js/page-header-95e1440f.js","static/js/user-list-5942b2ca.js"])),je=e.exports.lazy(()=>i(()=>import("./index-a3dcab45.js"),["static/js/index-a3dcab45.js","static/js/vendor-53f28a41.js"])),Ue=e.exports.lazy(()=>i(()=>import("./index-aadbd4c8.js"),["static/js/index-aadbd4c8.js","static/css/index-59dc7f7b.css","static/js/vendor-53f28a41.js"])),ze=()=>e.exports.createElement(e.exports.Suspense,{fallback:e.exports.createElement(Le,null)},e.exports.createElement(be,null,e.exports.createElement(Ce,null,e.exports.createElement(Y,null,e.exports.createElement(l,{path:"sign",element:e.exports.createElement(ke,null)}),e.exports.createElement(l,{path:"/forget-password",element:e.exports.createElement(Be,null)}),e.exports.createElement(l,{path:"/",element:e.exports.createElement(De,null,e.exports.createElement(qe,null))},e.exports.createElement(l,{index:!0,element:e.exports.createElement(Ne,null)}),e.exports.createElement(l,{path:"announcement",element:e.exports.createElement(Ue,null)}),e.exports.createElement(l,{path:"user",element:e.exports.createElement(we,null)}),e.exports.createElement(l,{path:"apply"},e.exports.createElement(l,{index:!0,element:e.exports.createElement(Ie,null)}),e.exports.createElement(l,{path:"form",element:e.exports.createElement(j,null)},e.exports.createElement(l,{path:":applyId",element:e.exports.createElement(j,null)}))),e.exports.createElement(l,{path:"upload",element:e.exports.createElement(Oe,null)}),e.exports.createElement(l,{path:"process"},e.exports.createElement(l,{index:!0,element:e.exports.createElement(Te,null)}),e.exports.createElement(l,{path:"initiate-process",element:e.exports.createElement(Re,null)})),e.exports.createElement(l,{path:"*",element:e.exports.createElement(je,null)})),e.exports.createElement(l,{path:"*",element:e.exports.createElement(b,{to:"/sign"})})))));const U={required:"${label}\u4E0D\u80FD\u4E3A\u7A7A"},z=[{required:!0}],lt={labelCol:{span:4,offset:2},wrapperCol:{span:12},scrollToFirstError:!0,requiredMark:!1,labelWrap:!0,validateMessages:U},it=n=>n&&n>v().endOf("day"),ct=n=>n&&n<v().startOf("day"),pt=n=>n>v().endOf("year"),Ve=[{text:"\u6210\u529F",status:"success",color:"green"},{text:"\u5931\u8D25",status:"fail",color:"#f5222d"},{text:"\u6CE8\u610F",status:"warning",color:"volcano"},{text:"\u9519\u8BEF",status:"error",color:"red"},{text:"\u5B8C\u6210",status:"finish",color:"#aaa"}],Me=n=>{const{children:t,status:r,text:o}=n,s=e.exports.useMemo(()=>Ve.find(a=>a.status===r),[r]);return e.exports.createElement(Z.Ribbon,{text:o||(s==null?void 0:s.text),color:s==null?void 0:s.color},t)};var F={"feedback-button":"xupt_sHsstyle-module__feedback-button__yHC6y","feedback-button-text":"xupt_sHsstyle-module__feedback-button-text__sxFR3","error-info":"xupt_sHsstyle-module__error-info__2kaoN"};const{Paragraph:V}=oe,$e=[{label:"\u9875\u9762\u663E\u793A",value:"page_display"},{label:"\u8868\u5355\u4EA4\u4E92",value:"form_interaction"},{label:"\u4FE1\u606F\u63D0\u4EA4",value:"information_submission"},{label:"\u6570\u636E\u9519\u8BEF",value:"data_error"},{label:"\u7ED3\u679C\u65E0\u54CD\u5E94/\u54CD\u5E94\u5F02\u5E38",value:"result_response"}],He=()=>{const[n]=x.useForm(),[t,r]=e.exports.useState(!1),[o,s]=e.exports.useState(!1),a=async()=>{await n.validateFields();try{s(!0);const u=n.getFieldsValue(!0)}catch{S.error("\u53CD\u9988\u63D0\u4EA4\u5931\u8D25")}finally{s(!1)}};return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(ee,{className:F["feedback-button"],shape:"circle",disabled:t,icon:e.exports.createElement(te,null),onClick:()=>r(!t)},e.exports.createElement("div",{className:F["feedback-button-text"]},"\u95EE\u9898\u53CD\u9988")),e.exports.createElement(re,{forceRender:!0,visible:t,title:"\u95EE\u9898\u53CD\u9988",onCancel:()=>r(!!o),cancelButtonProps:{disabled:o},onOk:a,confirmLoading:o},e.exports.createElement(Me,{status:"error",text:"\u9519\u8BEF\u5B9A\u4F4D"},e.exports.createElement("div",{className:F["error-info"]},e.exports.createElement(V,null,e.exports.createElement(I,{orientation:"left"},"\u7528\u6237\u8BBE\u5907\u63CF\u8FF0\uFF1A"),e.exports.createElement("blockquote",null,navigator.userAgent)),e.exports.createElement(V,null,e.exports.createElement(I,{orientation:"left"},"\u5F53\u524D\u9875\u9762\u7F51\u5740\uFF1A"),e.exports.createElement("blockquote",null,location.href)))),e.exports.createElement(se,null,e.exports.createElement(x,{validateMessages:U,form:n,requiredMark:!1},e.exports.createElement(x.Item,{name:"type",label:"\u95EE\u9898\u7C7B\u578B",rules:z},e.exports.createElement(ne,{options:$e})),e.exports.createElement(x.Item,{name:"title",label:"\u95EE\u9898\u7B80\u8FF0",rules:z},e.exports.createElement(T,null)),e.exports.createElement(x.Item,{label:"\u95EE\u9898\u8BE6\u8FF0",name:"description"},e.exports.createElement(T.TextArea,null))))))},Je=O({name:"user",initialState:{},reducers:{}});var Ke=Je.reducer;const We=O({name:"process",initialState:{},reducers:{}});var Ge=We.reducer;const Qe=ae({reducer:{user:Ke,process:Ge},devTools:!0});function Xe(){return e.exports.createElement("div",{className:"app"},e.exports.createElement(ue,{store:Qe},e.exports.createElement(He,null),e.exports.createElement(le,null,e.exports.createElement(ze,null))),"?")}ie.render(R.createElement(ce,null,R.createElement(Xe,null)),document.getElementById("root"));export{g as A,et as E,Le as P,ut as a,lt as b,p as c,it as d,tt as e,ct as f,at as g,pt as h,rt as i,st as j,nt as k,ot as p,z as r,E as s,k as u,U as v};
//# sourceMappingURL=index-74bab682.js.map
