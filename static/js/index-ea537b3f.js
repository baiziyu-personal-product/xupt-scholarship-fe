var j=Object.defineProperty,v=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var I=(e,s,a)=>s in e?j(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,m=(e,s)=>{for(var a in s||(s={}))P.call(s,a)&&I(e,a,s[a]);if(p)for(var a of p(s))y.call(s,a)&&I(e,a,s[a]);return e},C=(e,s)=>v(e,N(s));var A=(e,s)=>{var a={};for(var l in e)P.call(e,l)&&s.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&p)for(var l of p(e))s.indexOf(l)<0&&y.call(e,l)&&(a[l]=e[l]);return a};import{r as t,C as S,E as R,a0 as n,a1 as D,p as T,X as U,m as $}from"./vendor-53f28a41.js";import{a as w,g as z}from"./index-74bab682.js";import{s as x,C as G,P as V}from"./style.module-22f9f897.js";import{u as X}from"./user-list-5942b2ca.js";const q=[{responsible_department:[],title:"\u5C1A\u672A\u5F00\u59CB",step:"deployment_mobilization_phase",date:G,manager:[{name:"-",email:"-",avatar:"-"}],processingRatio:"0/0",dailyProcessingRate:0,desc:[]}],H=e=>{const b=e,{title:s}=b,a=A(b,["title"]),{list:l}=X(),{process_id:E,step:f}=w(),[i,B]=t.exports.useState(q),[L,g]=t.exports.useState(!1),k=o=>l.find(r=>r.email===o)||{},_=o=>V.find(r=>r.step===o)||{},h=async()=>{try{g(!0);const{form:o}=await z(E),r=o.form.filter(c=>c.step===f).map(c=>{var F;const u=_(c.step);return C(m(m({},u),c),{desc:[c.desc,(u==null?void 0:u.desc)||""].filter(d=>!!d),manager:(F=c.mentions)==null?void 0:F.map(d=>k(d))})});B(r)}catch(o){$.error(o.message)}finally{g(!1)}};return t.exports.useEffect(()=>{h()},[E,f]),t.exports.createElement(S,{className:x["process-step-card"],loading:L,title:t.exports.createElement("div",{className:x["card-box-title"]},i.length?"\u5F53\u524D\u5904\u7406\u6D41\u7A0B":null)},i.length?i.map(o=>t.exports.createElement(n,m({key:o.step,title:t.exports.createElement("div",{className:x["card-title"]},s),bordered:!0},a),t.exports.createElement(n.Item,{label:"\u5F53\u524D\u6D41\u7A0B"},o.title),t.exports.createElement(n.Item,{label:"\u5F00\u59CB\u65F6\u95F4"},o.date[0]),t.exports.createElement(n.Item,{label:"\u9884\u671F\u5904\u7406\u622A\u81F3\u65F6\u95F4"},o.date[1]),t.exports.createElement(n.Item,{label:"\u5904\u7406\u4EBA"},t.exports.createElement(D.Group,null,o.manager.map(r=>t.exports.createElement(T,{key:r.email,title:`${r.name} | ${r.email}`,placement:"top"},t.exports.createElement(D,{src:r.avatar}))))),t.exports.createElement(n.Item,{label:"\u4E3B\u4F53\u6210\u5458"},o.responsible_department.map(r=>t.exports.createElement(U,{key:r,color:"geekblue"},r))),t.exports.createElement(n.Item,{label:"\u6D41\u7A0B\u63CF\u8FF0"},o.desc.map(r=>t.exports.createElement("span",{key:r},r))))):t.exports.createElement(R,null))};H.defaultProps={};export{H as P};
//# sourceMappingURL=index-ea537b3f.js.map
