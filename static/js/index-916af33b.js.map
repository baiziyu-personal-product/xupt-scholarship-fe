{"version":3,"file":"index-916af33b.js","sources":["../../../src/pages/user-center/components/user-info.tsx","../../../src/pages/user-center/index.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Descriptions, Badge, Button, Modal, Tag, Card } from 'antd';\r\nimport { EditFilled } from '@ant-design/icons';\r\nimport style from '../style.module.less';\r\nimport UpdateUserInfo from '@/components/update-user-info';\r\nimport { useAuth } from '@/context/auth.context';\r\nimport moment from 'moment';\r\n\r\ninterface IProps {\r\n\r\n}\r\n\r\nconst UserInfo: React.FC<IProps> = (props) => {\r\n  const { user } = useAuth();\r\n  const { student, manager, ...baseInfo } = user;\r\n  const [modalVisible, setModalVisible] = React.useState(false);\r\n  const detailInfo = React.useMemo(() => baseInfo.identity === 'manager' ? manager : student, [user])\r\n  const isStudent = React.useMemo(() => baseInfo.identity !== 'manager', [baseInfo]);\r\n  const positionInfo = React.useMemo(\r\n    () => {\r\n      if (baseInfo.identity === 'manager') {\r\n        const tempInfo = detailInfo as unknown as IManagerInfo;\r\n        return `${tempInfo.department} - ${tempInfo.office} - ${tempInfo.position}`\r\n      }\r\n      const tempInfo = detailInfo as unknown as IStudentInfo;\r\n      return `${tempInfo.college} - ${tempInfo.professional} 『 ${moment(tempInfo.grade).format(\"YYYY\")} 级（${tempInfo.class}） 班 』`\r\n    },\r\n    [baseInfo, detailInfo]);\r\n\r\n  const showModal = () => {\r\n    setModalVisible(true);\r\n  }\r\n  const closeModal = () => {\r\n    setModalVisible(false);\r\n  }\r\n\r\n  return (\r\n    <div className={style['user-info']}>\r\n      <Modal\r\n        footer={null}\r\n        onCancel={closeModal}\r\n        title=\"完善用户信息\"\r\n        visible={modalVisible}>\r\n        <UpdateUserInfo\r\n          formValue={user}\r\n        />\r\n      </Modal>\r\n      <section className={style['avatar-card']}>\r\n        <div\r\n          className={style['avatar-box']}\r\n          style={{\r\n            backgroundImage: `url(${baseInfo.avatar})`\r\n          }}\r\n        >\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<EditFilled />}\r\n          onClick={showModal}\r\n          block\r\n        >编辑个人信息</Button>\r\n      </section>\r\n      <Descriptions\r\n        title=\"我的信息\"\r\n        bordered\r\n      >\r\n        <Descriptions.Item label=\"姓名\">{baseInfo.name}</Descriptions.Item>\r\n        <Descriptions.Item label={isStudent ? \"学号\" : \"工号\"}>{baseInfo.user_id}</Descriptions.Item>\r\n        <Descriptions.Item label=\"邮箱\">{baseInfo.email}</Descriptions.Item>\r\n        <Descriptions.Item label=\"手机号\">{baseInfo.phone}</Descriptions.Item>\r\n        <Descriptions.Item label={isStudent ? \"班级\" : \"职位\"} span={2}>\r\n          {positionInfo}\r\n        </Descriptions.Item>\r\n        {\r\n          user.identity !== 'manager' && (\r\n            <Descriptions.Item label=\"学位类型\" span={3}>\r\n              {(detailInfo as IStudentInfo).type === 'bachelor_degree' ? <Tag color=\"geekblue\">学硕</Tag> : <Tag color=\"green\">专硕</Tag>}\r\n            </Descriptions.Item>\r\n          )\r\n        }\r\n        <Descriptions.Item label=\"资料查看\">\r\n          <Card>\r\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/zs.htm\" target=\"_blank\" title=\"招生\">招生</a></Card.Grid>\r\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/py.htm\" title=\"培养\">培养</a></Card.Grid>\r\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/xw.htm\" title=\"学位\">学位</a></Card.Grid>\r\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/xk.htm\" title=\"学科\">学科</a></Card.Grid>\r\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/xsgl.htm\" title=\"学生管理\">学生管理</a></Card.Grid>\r\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/gjzc.htm\" title=\"国家政策\">国家政策</a></Card.Grid>\r\n          </Card>\r\n        </Descriptions.Item>\r\n      </Descriptions>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default UserInfo;","import { useAuth } from '@/context/auth.context';\r\nimport { Card } from 'antd';\r\nimport * as React from 'react';\r\nimport UserInfo from './components/user-info';\r\n\r\nexport interface IUserInfo extends IUser {\r\n\r\n}\r\n\r\nconst UserCenter: React.FC = () => {\r\n  return (\r\n    <Card>\r\n      <UserInfo />\r\n    </Card>\r\n  )\r\n};\r\n\r\nexport default UserCenter;"],"names":["React.useState","React.useMemo"],"mappings":"woBAYA,KAAM,GAA6B,AAAC,GAAU,MACtC,CAAE,QAAS,IACyB,IAAlC,WAAS,WAAyB,EAAb,IAAa,EAAb,CAArB,UAAS,YACX,CAAC,EAAc,GAAmBA,mBAAe,IACjD,EAAaC,kBAAc,IAAM,EAAS,WAAa,UAAY,EAAU,EAAS,CAAC,IACvF,EAAYA,kBAAc,IAAM,EAAS,WAAa,UAAW,CAAC,IAClE,EAAeA,kBACnB,IAAM,IACA,EAAS,WAAa,UAAW,MAC7B,GAAW,QACV,GAAG,EAAS,gBAAgB,EAAS,YAAY,EAAS,gBAE7D,GAAW,QACV,GAAG,EAAS,aAAa,EAAS,uBAAkB,EAAO,EAAS,OAAO,OAAO,uBAAa,EAAS,6BAEjH,CAAC,EAAU,IAEP,EAAY,IAAM,GACN,KAEZ,EAAa,IAAM,GACP,oCAIf,MAAD,CAAK,UAAW,EAAM,sCACnB,EAAD,CACE,OAAQ,KACR,SAAU,EACV,MAAM,uCACN,QAAS,2BACR,EAAD,CACE,UAAW,6BAGd,UAAD,CAAS,UAAW,EAAM,wCACvB,MAAD,CACE,UAAW,EAAM,cACjB,MAAO,CACL,gBAAiB,OAAO,EAAS,qCAIpC,EAAD,CACE,KAAK,UACL,6BAAO,EAAD,MACN,QAAS,EACT,MAAK,IACN,iEAEF,EAAD,CACE,MAAM,2BACN,SAAQ,4BAEP,EAAa,KAAd,CAAmB,MAAM,gBAAM,EAAS,8BACvC,EAAa,KAAd,CAAmB,MAAO,EAAY,eAAO,gBAAO,EAAS,iCAC5D,EAAa,KAAd,CAAmB,MAAM,gBAAM,EAAS,+BACvC,EAAa,KAAd,CAAmB,MAAM,sBAAO,EAAS,+BACxC,EAAa,KAAd,CAAmB,MAAO,EAAY,eAAO,eAAM,KAAM,GACtD,GAGD,EAAK,WAAa,mCACf,EAAa,KAAd,CAAmB,MAAM,2BAAO,KAAM,GAClC,EAA4B,OAAS,0CAAqB,EAAD,CAAK,MAAM,YAAW,wCAAY,EAAD,CAAK,MAAM,SAAQ,yCAIpH,EAAa,KAAd,CAAmB,MAAM,oDACtB,EAAD,6BACG,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,OAAO,SAAS,MAAM,gBAAK,yCACtF,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,MAAM,gBAAK,yCACtE,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,MAAM,gBAAK,yCACtE,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,MAAM,gBAAK,yCACtE,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,2CAA2C,MAAM,4BAAO,qDAC1E,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,2CAA2C,MAAM,4BAAO,kCC9EjF,EAAuB,4BAExB,EAAD,6BACG,EAAD"}