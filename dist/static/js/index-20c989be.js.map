{"version":3,"file":"index-20c989be.js","sources":["../../../node_modules/antd/lib/_util/type.js","../../../node_modules/antd/lib/_util/colors.js","../../../src/pages/dash-board/components/department-card.tsx","../../../src/pages/dash-board/components/handle-chart.card.tsx","../../../src/pages/dash-board/components/process-info-card.tsx","../../../src/pages/dash-board/components/quick-start-card.tsx","../../../src/pages/dash-board/index.tsx"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tupleNum = exports.tuple = void 0;\n\n// https://stackoverflow.com/questions/46176165/ways-to-get-string-literal-type-of-array-values-without-enum-overhead\nvar tuple = function tuple() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return args;\n};\n\nexports.tuple = tuple;\n\nvar tupleNum = function tupleNum() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return args;\n};\n\nexports.tupleNum = tupleNum;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PresetStatusColorTypes = exports.PresetColorTypes = void 0;\n\nvar _type = require(\"./type\");\n\nvar PresetStatusColorTypes = (0, _type.tuple)('success', 'processing', 'error', 'default', 'warning'); // eslint-disable-next-line import/prefer-default-export\n\nexports.PresetStatusColorTypes = PresetStatusColorTypes;\nvar PresetColorTypes = (0, _type.tuple)('pink', 'red', 'yellow', 'orange', 'cyan', 'green', 'blue', 'purple', 'geekblue', 'magenta', 'volcano', 'gold', 'lime');\nexports.PresetColorTypes = PresetColorTypes;","import { cx } from '@/utils';\r\nimport { Card, Popover, Tag } from 'antd';\r\nimport { PresetColorTypes } from 'antd/lib/_util/colors';\r\nimport * as React from 'react';\r\nimport style from '../style.module.less';\r\n\r\nconst DepartmentInfoList: {\r\n  title: string;\r\n  email: string;\r\n  phone: string;\r\n  addr: string;\r\n}[] = (new Array(12).fill({\r\n  title: '校研究生院',\r\n  email: 'test-email@xupt.edu.cn',\r\n  phone: '010-443-445',\r\n  addr: '长安校区东区教学楼D-4443'\r\n})).map(((item, index) => ({\r\n  ...item,\r\n  email: index + item.email,\r\n  title: index * ('99' as any) + item.title\r\n})));\r\n\r\nconst colors = PresetColorTypes;\r\nconst colorsLen = colors.length;\r\n\r\nconst DepartmentCard: React.FC = () => {\r\n  return (\r\n    <Card\r\n      className={cx(style['info-card'], style['department-card'])}\r\n      title=\"评审负责部门信息\"\r\n    >\r\n      <div className={style['department-list-box']}>\r\n        {\r\n          DepartmentInfoList.map((department, index) => (\r\n            <div key={department.email}>\r\n              <Popover content={\r\n                <div>\r\n                  <p>邮箱：{department.email}</p>\r\n                  <p>电话：{department.phone}</p>\r\n                  <p>地址：{department.addr}</p>\r\n                </div>\r\n              } title=\"联系方式\">\r\n                <Tag\r\n                  color={colors[index % (colorsLen - 1)]}\r\n                  closable\r\n                >\r\n                  {department.title}\r\n                </Tag>\r\n              </Popover>\r\n            </div>\r\n          ))\r\n        }\r\n      </div>\r\n    </Card>\r\n  )\r\n};\r\n\r\nexport default DepartmentCard;","import { cx } from '@/utils';\r\nimport { Card } from 'antd';\r\nimport * as React from 'react';\r\nimport style from '../style.module.less';\r\nimport ReactEcharts from 'echarts-for-react';\r\n\r\nconst HandleChartCard: React.FC = () => {\r\n  const option = {\r\n    tooltip: {\r\n      trigger: 'axis',\r\n      axisPointer: {\r\n        type: 'cross',\r\n        crossStyle: {\r\n          color: '#999'\r\n        }\r\n      }\r\n    },\r\n    toolbox: {\r\n      feature: {\r\n        dataView: { show: true, readOnly: true, title: \"展示数据\" },\r\n        magicType: { show: true, type: ['line', 'bar'] },\r\n        saveAsImage: { show: true, title: \"保存为图片\" },\r\n        restore: { show: true },\r\n      }\r\n    },\r\n    legend: {\r\n      data: ['提交量', '处理量', '速率']\r\n    },\r\n    xAxis: [\r\n      {\r\n        type: 'category',\r\n        data: ['一','二','三', '四', '五', '六', '日'].map(v => `星期${v}`),\r\n        axisPointer: {\r\n          type: 'shadow'\r\n        }\r\n      }\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: 'value',\r\n        name: '提交量',\r\n      },\r\n      {\r\n        type: 'value',\r\n        name: '速率',\r\n      }\r\n    ],\r\n    series: [\r\n      {\r\n        name: '提交量',\r\n        type: 'bar',\r\n        data: [\r\n          2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3\r\n        ]\r\n      },\r\n      {\r\n        name: '处理量',\r\n        type: 'bar',\r\n        data: [\r\n          2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3\r\n        ]\r\n      },\r\n      {\r\n        name: '速率',\r\n        type: 'line',\r\n        tooltip: {\r\n          valueFormatter: function (value: string) {\r\n            return value + ' 个/天';\r\n          }\r\n        },\r\n        yAxisIndex: 1,\r\n        data: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2]\r\n      }\r\n    ]\r\n  };\r\n  return (\r\n    <Card\r\n      className={cx(style['info-card'], style['chart-card'])}\r\n      title=\"日处理速率\"\r\n    >\r\n      <ReactEcharts\r\n        option={option}\r\n      />\r\n    </Card>\r\n  )\r\n};\r\n\r\nexport default HandleChartCard;","import ProcessStepInfo from '@/pages/process/pages/handle-process/components/process-step-info';\r\nimport { cx } from '@/utils';\r\nimport * as React from 'react';\r\nimport style from '../style.module.less';\r\n\r\nconst ProcessInfo:React.FC = () => {\r\n\r\n  return (\r\n    <div\r\n      className={cx(style['info-card'], style['process-card'])}\r\n    >\r\n      <ProcessStepInfo column={1}  title=\"流程动态\" />\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default ProcessInfo;","import { cx } from '@/utils';\r\nimport * as React from 'react';\r\nimport style from '../style.module.less';\r\nimport { getMenus, IMenu } from '@/components/page-nav/menu.config';\r\nimport { Menu, Card } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport { useProcess } from '@/context/process-status';\r\n\r\n\r\n\r\nconst QuickStart: React.FC = () => {\r\n  const { process_id } = useProcess();\r\n  const childMenus = React.useMemo(() => getMenus(process_id).reduce((p, c) => {\r\n    if (c.children && c.children.length) {\r\n      p = [...p, ...c.children.map(m => ({\r\n        ...m,\r\n        path: c.path + m.path\r\n      }))];\r\n    }\r\n    return p;\r\n  }, [] as IMenu[]), []);\r\n  return (\r\n    <Card\r\n      title=\"快速开始/便捷导航\"\r\n      className={cx(style['info-card'], style['quick-card'])}\r\n    >\r\n      {\r\n        childMenus.map(menu => (\r\n          <Link\r\n            key={menu.key}\r\n            to={menu.path}\r\n          >\r\n            <Card.Grid\r\n              className={style['menu-card']}\r\n            >\r\n              <div className={style['menu-icon-box']}>\r\n                {menu.icon}\r\n              </div>\r\n              <span className={style['menu-title']}>{menu.title}</span>\r\n            </Card.Grid>\r\n          </Link>\r\n        ))\r\n      }\r\n    </Card>\r\n  )\r\n};\r\n\r\nexport default QuickStart;","import { PageHeaderState, usePageHeaderContext } from '@/context/page-header';\r\nimport { useAuth } from '@/context/auth.context';\r\nimport { Descriptions, Tag } from 'antd';\r\nimport * as React from 'react';\r\nimport DepartmentCard from './components/department-card';\r\nimport HandleChartCard from './components/handle-chart.card';\r\nimport ProcessInfo from './components/process-info-card';\r\nimport QuickStart from './components/quick-start-card';\r\nimport style from './style.module.less';\r\nimport moment from 'moment';\r\n\r\n\r\nconst IdentityMap: Record<IUser['identity'], string> = {\r\n  student: \"学生\",\r\n  manager: \"管理员\",\r\n  'student,manager': \"学生管理员\"\r\n}\r\n\r\nconst DashBoard: React.FC = () => {\r\n  const { updatePageHeaderState } = usePageHeaderContext();\r\n  const { user } = useAuth();\r\n  const HeaderProps = React.useMemo<PageHeaderState>(() => ({\r\n    title: user.name,\r\n    avatar: { src: user.avatar, style: { border: '1px solid #aaa' } },\r\n    subTitle: user.user_id,\r\n    tags: <Tag color=\"geekblue\">{IdentityMap[user.identity] || \"游客\"}</Tag>,\r\n    children: (\r\n      <Descriptions>\r\n        <Descriptions.Item label=\"邮件地址\">{user.email}</Descriptions.Item>\r\n        <Descriptions.Item label=\"联系电话\">{user.phone}</Descriptions.Item>\r\n        <Descriptions.Item label=\"所在部门/学院\">{user.student?.college || user.manager?.department}</Descriptions.Item>\r\n        <Descriptions.Item label=\"具体部门/专业\">{user.student?.professional || user.manager?.office}</Descriptions.Item>\r\n        <Descriptions.Item label=\"班级/职位\">\r\n          {\r\n            user.identity === 'manager'\r\n              ? (user.manager?.position)\r\n              : (moment(user.student?.grade).format(\"YYYY\") + \" 级 \" + user.student?.class + \"班\")\r\n          }\r\n        </Descriptions.Item>\r\n      </Descriptions>\r\n    ),\r\n  }), [user]);\r\n\r\n  React.useEffect(() => {\r\n    updatePageHeaderState(HeaderProps);\r\n    return () => updatePageHeaderState({});\r\n  }, [HeaderProps]);\r\n\r\n  return (\r\n    <div className={style['dash-page']}>\r\n      <div className={style['left-row']}>\r\n        <ProcessInfo />\r\n        <HandleChartCard />\r\n      </div>\r\n      <div className={style['right-row']}>\r\n        <QuickStart />\r\n        <DepartmentCard />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default DashBoard;"],"names":["colors","require$$0","PresetColorTypes","ReactEcharts","React.useMemo"],"mappings":"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"}