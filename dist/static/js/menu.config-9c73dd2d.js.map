{"version":3,"file":"menu.config-9c73dd2d.js","sources":["../../../src/components/page-nav/menu.config.tsx"],"sourcesContent":["import { ProcessStatus } from \"@/context/process-status\";\r\nimport { AppstoreTwoTone, AreaChartOutlined, CloudTwoTone, ContainerOutlined, ContainerTwoTone, FormOutlined, InteractionTwoTone, SwapOutlined, ToolTwoTone } from \"@ant-design/icons\";\r\nimport { Menu } from \"antd\";\r\nimport React, { ReactNode } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nexport interface IMenu {\r\n  key: string;\r\n  title: string;\r\n  path: string;\r\n  icon?: ReactNode;\r\n  type?: 'group' | 'sub_menu';\r\n  children?: IMenu[];\r\n  blockList?: IUser['identity'][];\r\n\r\n}\r\n\r\nexport const getMenus = (process_id: number): IMenu[] => [\r\n  {\r\n    key: 'home',\r\n    path: '/',\r\n    title: '个人面板',\r\n    icon: <AppstoreTwoTone twoToneColor=\"rgba(57, 90, 255, 1)\" />\r\n  },\r\n  {\r\n    key: 'apply',\r\n    path: '/apply',\r\n    title: '申请奖学金',\r\n    icon: <ContainerTwoTone twoToneColor=\"rgba(57, 90, 255, 1)\" />,\r\n    children: [\r\n      {\r\n        key: 'form',\r\n        path: '/form',\r\n        title: '发起申请',\r\n        blockList: [\"manager\"],\r\n        icon: <FormOutlined twoToneColor=\"rgba(57, 90, 255, 1)\" />\r\n      },\r\n      {\r\n        key: 'progress',\r\n        path: '',\r\n        title: '申请进度',\r\n        icon: <SwapOutlined twoToneColor=\"rgba(57, 90, 255, 1)\" />\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    key: 'process',\r\n    path: '/process',\r\n    title: '评定流程',\r\n    icon: <InteractionTwoTone twoToneColor=\"rgba(57, 90, 255, 1)\" />,\r\n    children: [\r\n      {\r\n        key: 'handle',\r\n        path: '',\r\n        title: '流程管理/查看',\r\n        icon: <AreaChartOutlined twoToneColor=\"rgba(57, 90, 255, 1)\" />\r\n      },\r\n      {\r\n        key: 'initiate',\r\n        path: '/initiate-process',\r\n        title: process_id === -1 ? '发起评定流程' : '查看评定流程',\r\n        // blockList: [\"student\", \"student,manager\"],\r\n        icon: <ContainerOutlined twoToneColor=\"rgba(57, 90, 255, 1)\" />,\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    key: 'upload',\r\n    path: '/upload',\r\n    title: '上传学生名单',\r\n    blockList: [\"student\"],\r\n    icon: <CloudTwoTone twoToneColor=\"rgba(57, 90, 255, 1)\" />,\r\n  },\r\n  {\r\n    key: 'user',\r\n    path: '/user',\r\n    title: \"用户中心\",\r\n    icon: <ToolTwoTone twoToneColor=\"rgba(57, 90, 255, 1)\" />,\r\n  }\r\n];\r\n\r\n/**\r\n * 获取key对应的title\r\n * @param searchKey \r\n * @param menus \r\n */\r\nexport const getTitle = (searchKeys: string[], menus: IMenu[]): string[] => {\r\n  let tempChildMenus: IMenu[] = [];\r\n  return searchKeys.map((key, index) => {\r\n    if (index === 0) {\r\n      const matched = menus.find(item => item.key === key);\r\n      tempChildMenus = matched?.children || [];\r\n      return matched?.title || '';\r\n    }\r\n    return tempChildMenus.find(item => item.key === key)?.title || '';\r\n  })\r\n}\r\n\r\nexport const renderMenu = (menus: IMenu[], identity: IUser['identity']) => {\r\n  return menus.map(menu => {\r\n    if (menu.children) {\r\n      return (\r\n        <Menu.SubMenu key={menu.key} title={menu.title} icon={menu.icon} >\r\n          {\r\n            menu.children.map((item) => (\r\n              <Menu.Item key={item.key}\r\n                disabled={(item.blockList || []).includes(identity)}\r\n                icon={item.icon}\r\n              >\r\n                <Link to={`${menu.path}${item.path}`}>{item.title}</Link>\r\n              </Menu.Item>\r\n            ))\r\n          }\r\n        </Menu.SubMenu>\r\n      )\r\n    }\r\n    return (\r\n      <Menu.Item\r\n        disabled={(menu.blockList || []).includes(identity)}\r\n        key={menu.key}\r\n        icon={menu.icon}\r\n      >\r\n        <Link to={menu.path || '/'}>{menu.title}</Link>\r\n      </Menu.Item>\r\n    )\r\n  });\r\n}\r\n\r\nexport const getMatchedKeys = (pathname: string, menus: IMenu[]) => {\r\n  const keys: string[] = [];\r\n  const pathNames = pathname.split('/').filter(v => !!v);\r\n  const key = menus.find(menu => {\r\n    if (menu.path === `/${pathNames[0]}`) {\r\n      if (menu.children) {\r\n        const childKey = menu.children.find(item => item.path === (pathNames[1] ? `/${pathNames[1]}` : ''))?.key || '';\r\n        keys.push(menu.key, childKey);\r\n        return true;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  })?.key || 'home';\r\n\r\n  return !!keys.length ? keys : [key];\r\n}"],"names":[],"mappings":"qIAkBa,GAAW,AAAC,GAAgC,CACvD,CACE,IAAK,OACL,KAAM,IACN,MAAO,2BACP,qBAAO,EAAD,CAAiB,aAAa,0BAEtC,CACE,IAAK,QACL,KAAM,SACN,MAAO,iCACP,qBAAO,EAAD,CAAkB,aAAa,yBACrC,SAAU,CACR,CACE,IAAK,OACL,KAAM,QACN,MAAO,2BACP,UAAW,CAAC,WACZ,qBAAO,EAAD,CAAc,aAAa,0BAEnC,CACE,IAAK,WACL,KAAM,GACN,MAAO,2BACP,qBAAO,EAAD,CAAc,aAAa,4BAIvC,CACE,IAAK,UACL,KAAM,WACN,MAAO,2BACP,qBAAO,EAAD,CAAoB,aAAa,yBACvC,SAAU,CACR,CACE,IAAK,SACL,KAAM,GACN,MAAO,wCACP,qBAAO,EAAD,CAAmB,aAAa,0BAExC,CACE,IAAK,WACL,KAAM,oBACN,MAAO,IAAe,GAAK,uCAAW,uCAEtC,qBAAO,EAAD,CAAmB,aAAa,4BAI5C,CACE,IAAK,SACL,KAAM,UACN,MAAO,uCACP,UAAW,CAAC,WACZ,qBAAO,EAAD,CAAc,aAAa,0BAEnC,CACE,IAAK,OACL,KAAM,QACN,MAAO,2BACP,qBAAO,EAAD,CAAa,aAAa,2BASvB,EAAW,CAAC,EAAsB,IAA6B,IACtE,GAA0B,SACvB,GAAW,IAAI,CAAC,EAAK,IAAU,UAChC,IAAU,EAAG,MACT,GAAU,EAAM,KAAK,GAAQ,EAAK,MAAQ,YAC/B,kBAAS,WAAY,GAC/B,kBAAS,QAAS,SAEpB,MAAe,KAAK,GAAQ,EAAK,MAAQ,KAAzC,cAA+C,QAAS,MAItD,EAAa,CAAC,EAAgB,IAClC,EAAM,IAAI,GACX,EAAK,yBAEJ,EAAK,QAAN,CAAc,IAAK,EAAK,IAAK,MAAO,EAAK,MAAO,KAAM,EAAK,MAEvD,EAAK,SAAS,IAAI,AAAC,mBAChB,EAAK,KAAN,CAAW,IAAK,EAAK,IACnB,YAAgB,WAAa,IAAI,SAAS,GAC1C,KAAM,EAAK,sBAEV,EAAD,CAAM,GAAI,GAAG,EAAK,OAAO,EAAK,QAAS,EAAK,0BAQrD,EAAK,KAAN,CACE,YAAgB,WAAa,IAAI,SAAS,GAC1C,IAAK,EAAK,IACV,KAAM,EAAK,sBAEV,EAAD,CAAM,GAAI,EAAK,MAAQ,KAAM,EAAK,SAM7B,EAAiB,CAAC,EAAkB,IAAmB,YAC5D,GAAiB,GACjB,EAAY,EAAS,MAAM,KAAK,OAAO,GAAK,CAAC,CAAC,GAC9C,EAAM,MAAM,KAAK,GAAQ,UACzB,EAAK,OAAS,IAAI,EAAU,KAAM,IAChC,EAAK,SAAU,MACX,GAAW,MAAK,SAAS,KAAK,GAAQ,EAAK,UAAoB,GAAK,IAAI,EAAU,KAAO,OAA9E,cAAoF,MAAO,YACvG,KAAK,EAAK,IAAK,GACb,SAEF,SAEF,OATG,cAUR,MAAO,aAEJ,AAAE,GAAK,OAAS,EAAO,CAAC"}