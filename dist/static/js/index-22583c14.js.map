{"version":3,"file":"index-22583c14.js","sources":["../../../src/pages/application/pages/application-list/components/history-line/index.tsx","../../../src/pages/application/pages/application-list/components/history-table/interface.ts","../../../src/pages/application/pages/application-list/components/history-table/index.tsx","../../../src/pages/application/pages/application-list/index.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Card, Empty, Timeline } from 'antd';\r\nimport Style from '../../style.module.less';\r\n\r\ninterface ITimeLine {\r\n  time: number;\r\n  info: string;\r\n}\r\n\r\nconst HistoryLine: React.FC = () => {\r\n  const [timeLines, setTimeLines] = React.useState<ITimeLine[]>([]);\r\n  return (\r\n    <Card>\r\n      {\r\n        !timeLines.length ? (\r\n          <Empty />\r\n        ) : (\r\n            <Timeline mode=\"left\">\r\n              {\r\n                timeLines.map(item => {\r\n                  return (\r\n                    <Timeline.Item\r\n                      key={item.time}\r\n                      label={item.time}\r\n                    >{item.info}</Timeline.Item>\r\n                  );\r\n                })\r\n              }\r\n            </Timeline>\r\n          )\r\n      }\r\n    </Card>\r\n  );\r\n}\r\nexport default HistoryLine;","export type IHandleStatus = 'save' | 'submit';\r\nexport type IValidateStatus = 'success' | 'failed';\r\n\r\n/** 历史 Columns */\r\nexport interface HistoryTableData {\r\n  handle_state: IHandleStatus;\r\n  create_at: string;\r\n  edit_at: string;\r\n  id: number;\r\n}\r\n\r\nexport const TypesMap: Map<IValidateStatus | IHandleStatus, string> = new Map([\r\n  ['save', '已保存'],\r\n  ['submit', '已提交'],\r\n  ['success', '已验证'],\r\n  ['failed', '未验证']\r\n])","import * as React from 'react';\r\nimport { Table, Tag, Space, TableProps, Button, message } from 'antd';\r\nimport * as I from './interface';\r\nimport { Link } from 'react-router-dom';\r\nimport { DeleteOutlined, EditTwoTone } from '@ant-design/icons';\r\nimport * as api from '@/service/apply';\r\nimport Style from '../../style.module.less';\r\nimport { useProcess } from '@/context/process-status';\r\n\r\nconst columns: TableProps<I.HistoryTableData>['columns'] = [\r\n  {\r\n    title: '表单ID',\r\n    dataIndex: 'id',\r\n    key: 'id',\r\n  },\r\n  // {\r\n  //   title: '验证状态',\r\n  //   dataIndex: 'validate_state',\r\n  //   key: 'validate_state',\r\n  //   render: (state: I.IValidateStatus) => <Tag>{I.TypesMap.get(state)}</Tag>\r\n  // },\r\n  {\r\n    title: '处理状态',\r\n    dataIndex: 'handle_state',\r\n    key: 'handle_state',\r\n    render: (state: I.IHandleStatus) => <Tag color={state === 'submit' ? 'success' : 'geekblue'}>{I.TypesMap.get(state)}</Tag>\r\n  },\r\n  {\r\n    title: '创建时间',\r\n    key: 'create_at',\r\n    dataIndex: 'create_at'\r\n  },\r\n  {\r\n    title: '更新时间',\r\n    key: 'edit_at',\r\n    dataIndex: 'edit_at',\r\n  },\r\n  {\r\n    title: '操作',\r\n    key: 'action',\r\n    render: (_, record) => (\r\n      <Space size=\"middle\">\r\n        <Link\r\n          type=\"link\"\r\n          to={`/apply/form/${record.id}`}>\r\n          <EditTwoTone />\r\n        </Link>\r\n        <Button\r\n          type=\"link\"\r\n          danger\r\n          icon={\r\n            <DeleteOutlined />\r\n          }\r\n        />\r\n      </Space>\r\n    ),\r\n  },\r\n];\r\n\r\n\r\nconst HistoryTable: React.FC = () => {\r\n  const [tableData, setTableData] = React.useState<I.HistoryTableData[]>([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const { process_id } = useProcess();\r\n\r\n  const getTableData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const applyList = await api.getApplicationList({\r\n        page_count: 10,\r\n        page_index: 1,\r\n        is_check: true,\r\n        procedure_id: process_id\r\n      });\r\n      const tableData: I.HistoryTableData[] = (applyList || []).map(item => ({\r\n        key: item.id,\r\n        id: item.id,\r\n        create_at: item.create_at,\r\n        edit_at: item.edit_at,\r\n        handle_state: item.status,\r\n      }));\r\n      setTableData(tableData);\r\n    } catch (error) {\r\n      console.log(error);\r\n      message.error(\"获取申请列表失败\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    getTableData();\r\n  }, []);\r\n\r\n  return (\r\n    <Table\r\n      loading={loading}\r\n      columns={columns}\r\n      dataSource={tableData}\r\n    />\r\n  )\r\n};\r\n\r\nexport default HistoryTable;","import { Col, Row, Space } from 'antd';\r\nimport * as React from 'react';\r\nimport HistoryLine from './components/history-line';\r\nimport HistoryTable from './components/history-table';\r\n\r\nconst ApplicationList: React.FC = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <HistoryLine />\r\n      <HistoryTable />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ApplicationList;"],"names":["React.useState","I.TypesMap","api.getApplicationList","React.Fragment"],"mappings":"sMASA,KAAM,GAAwB,IAAM,MAC5B,CAAC,EAAW,GAAgBA,mBAA4B,mCAE3D,EAAD,KAEI,AAAC,EAAU,+BAGN,EAAD,CAAU,KAAK,QAEX,EAAU,IAAI,2BAET,EAAS,KAAV,CACE,IAAK,EAAK,KACV,MAAO,EAAK,MACZ,EAAK,gCAThB,EAAD,QCJG,EAAyD,GAAI,KAAI,CAC5E,CAAC,OAAQ,sBACT,CAAC,SAAU,sBACX,CAAC,UAAW,sBACZ,CAAC,SAAU,wBCNP,EAAqD,CACzD,CACE,MAAO,iBACP,UAAW,KACX,IAAK,MAQP,CACE,MAAO,2BACP,UAAW,eACX,IAAK,eACL,OAAQ,AAAC,2BAA4B,EAAD,CAAK,MAAO,IAAU,SAAW,UAAY,YAAaC,EAAW,IAAI,KAE/G,CACE,MAAO,2BACP,IAAK,YACL,UAAW,aAEb,CACE,MAAO,2BACP,IAAK,UACL,UAAW,WAEb,CACE,MAAO,eACP,IAAK,SACL,OAAQ,CAAC,EAAG,4BACT,EAAD,CAAO,KAAK,kCACT,EAAD,CACE,KAAK,OACL,GAAI,eAAe,EAAO,8BACzB,EAAD,+BAED,EAAD,CACE,KAAK,OACL,OAAM,GACN,6BACG,EAAD,WASN,EAAyB,IAAM,MAC7B,CAAC,EAAW,GAAgBD,mBAAqC,IACjE,CAAC,EAAS,GAAcA,mBAAe,IACvC,CAAE,cAAe,IAEjB,EAAe,SAAY,IAC3B,GACS,SAOL,IANY,KAAME,GAAuB,CAC7C,WAAY,GACZ,WAAY,EACZ,SAAU,GACV,aAAc,KAEsC,IAAI,IAAI,KAC5D,IAAK,EAAK,GACV,GAAI,EAAK,GACT,UAAW,EAAK,UAChB,QAAS,EAAK,QACd,aAAc,EAAK,YAER,SACN,WACC,IAAI,KACJ,MAAM,8DAEH,iCAIC,IAAM,MAEnB,4BAGA,EAAD,CACE,UACA,UACA,WAAY,KC7FZ,EAA4B,4BAE7BC,mBAAD,6BACG,EAAD,8BACC,EAAD"}