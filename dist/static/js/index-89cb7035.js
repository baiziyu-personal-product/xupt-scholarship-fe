var H=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var h=(s,e,r)=>e in s?H(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,_=(s,e)=>{for(var r in e||(e={}))W.call(e,r)&&h(s,r,e[r]);if(P)for(var r of P(e))G.call(e,r)&&h(s,r,e[r]);return s},D=(s,e)=>J(s,K(e));var m=(s,e,r)=>(h(s,typeof e!="symbol"?e+"":e,r),r);import{a as L,q as Q,r as t,S as y,u as C,b as X,m as S,N as v,R as Y,c as l,d as b,B as Z,F as x,e as ee,f as te,M as re,D as A,C as se,g as ne,I,T as oe,h as T,i as ae,P as ue,j as le,k as ie,l as O,n as ce}from"./vendor-d77eef1c.js";const pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}};pe();const de="modulepreload",R={},me="/xupt-scholarship-fe/",i=function(e,r){return!r||r.length===0?e():Promise.all(r.map(o=>{if(o=`${me}${o}`,o in R)return;R[o]=!0;const n=o.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":de,n||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),n)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",f)})})).then(()=>e())};class xe{constructor(){m(this,"writeTime");this.writeTime=Number(new Date)}isNotExist(e){return e===null||typeof e=="undefined"}}class Ee extends xe{constructor(e){super();m(this,"prefix");m(this,"setLtg",(e,r,o)=>{this.setStorage({key:e,value:r,expired:o,isLocal:!0})});m(this,"delLtg",e=>(this.delStorage({key:e,isLocal:!0}),e));m(this,"setStg",(e,r,o)=>{this.setStorage({key:e,value:r,expired:o,isLocal:!1})});m(this,"delStg",e=>(this.delStorage({key:e,isLocal:!1}),e));this.prefix=e||""}getLtg(e){return this.getStorage({key:e,isLocal:!0})}getStg(e){return this.getStorage({key:e,isLocal:!1})}setStorage(e){const{value:r,expired:o,isLocal:n,key:a}=e,u=this.prefix+a;let c={value:r,writeTime:this.writeTime,expired:o};n?localStorage.setItem(u,JSON.stringify(c)):sessionStorage.setItem(u,JSON.stringify(c))}getStorage(e){const{isLocal:r,key:o}=e,n=this.prefix+o;let a=null;if(r?a=localStorage.getItem(n):a=sessionStorage.getItem(n),this.isNotExist(a))return null;let u=JSON.parse(a);return this.isNotExist(u.expired)?u.value:this.isOutPeriod(u)?(this.delStorage({key:n,isLocal:r}),null):u.value}delStorage(e){const{isLocal:r,key:o}=e,n=this.prefix+o;r?localStorage.removeItem(n):sessionStorage.removeItem(n)}getStorageUsedSize(){return"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate():Promise.reject(null)}isOutPeriod(e){return e.value?Number(new Date)-e.writeTime>e.expired:!0}}var E=new Ee("st");const g="auth-code",tt=2*24*60*60*1e3;class ge{constructor(e){m(this,"instance");this.instance=L.create(e),this.instance.defaults.withCredentials=!0,this.requestInterceptors(),this.responseInterceptors()}cancel(){return L.CancelToken.source()}requestInterceptors(){this.instance.interceptors.request.use(function(e){const r=E.getStg(g);return r!==""&&(e.headers=D(_({},e.headers),{Authorization:"Bearer "+r})),e},function(e){return Promise.reject(e)})}responseInterceptors(){this.instance.interceptors.response.use(function(e){return e.data.code===1?Promise.reject(new Error(e.data.message)):e.status===401?(E.delStg(g),Promise.reject(new Error("\u6CA1\u6709\u6743\u9650"))):e.data.data},function(e){return Promise.reject(e)})}get(e,r,o){const n=Q.stringifyUrl({url:e,query:r});return this.instance.get(n,o)}post(e,r,o){return this.instance.post(e,r,o)}put(e,r,o){return this.instance.put(e,r,o)}delete(e,r,o){return this.instance.put(e,r,o)}postFormData(e,r){return this.instance.post(e,r,{headers:{"Content-Type":"multipart/form-data;charset=UTF-8"}})}}const p=new ge({baseURL:"/api"}),rt=()=>p.get("/user/list"),fe=()=>p.get("/user"),st=s=>p.post("/user/update/user/info",s),nt=function(s){return p.post("/sign/login",s)},ot=function(s){return p.post("/sign/register",s)},he=function(){return p.get("/sign/out")},at=s=>p.post("/process",s),ut=s=>p.get(`/process/${s}`),_e=()=>p.get("/process"),w=t.exports.createContext({}),ye=()=>t.exports.useContext(w),Se=s=>{const{user:e}=k(),[r,o]=t.exports.useState({status:"not_create",process_id:-1,editable:!0,createable:!0}),[n,a]=t.exports.useState(!1),u=async()=>{try{a(!0);const c=await _e();o(c)}catch(c){console.error(c.message)}finally{a(!1)}};return t.exports.useEffect(()=>{e.email&&u()},[e.email]),t.exports.createElement(w.Provider,{value:r},t.exports.createElement(y,{spinning:n},s.children))},ve=()=>{const{process_id:s}=ye();return s===-1},B=t.exports.createContext(null),N="/sign",be="/",Fe="/forget-password",Pe=[N,Fe],De=s=>{const{pathname:e}=C(),r=X(),[o,n]=t.exports.useState({}),[a,u]=t.exports.useState(!1),c=E.getStg(g),f=async()=>{try{u(!0);const d=await fe();n(d)}catch{S.error("\u83B7\u53D6\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F\u5931\u8D25")}finally{u(!1)}};t.exports.useEffect(()=>{!Pe.includes(e)&&!o.email&&c&&f()},[e]);const V=async d=>{try{await f(),r(d!=null?d:be,{replace:!0})}catch($){console.error($)}},M=async()=>{try{r(N,{replace:!0}),await he()}catch(d){console.error(d)}finally{n({}),E.delStg(g)}};return t.exports.createElement(B.Provider,{value:{user:o,signIn:V,signOut:M}},t.exports.createElement(y,{spinning:a},s.children))},k=()=>t.exports.useContext(B),Le=["/apply/form"],Ce=s=>s?["/upload","/process/initiate-process"]:["/upload"],Ae=s=>s?["/process/initiate-process"]:[],Ie=s=>{const{user:e}=k(),r=ve(),o=E.getStg(g),n=C(),{pathname:a}=n;return[e.identity==="manager"&&Le.includes(a),e.identity==="student"&&Ce(r).includes(a),e.identity==="student,manager"&&Ae(r).includes(a)].includes(!0)?(S.warn("\u60A8\u6CA1\u6709\u67E5\u770B\u8BE5\u9875\u9762\u7684\u6743\u9650"),t.exports.createElement(v,{to:"/",replace:!0})):!e.email&&!o?t.exports.createElement(v,{to:"/sign",state:{from:n},replace:!0}):t.exports.createElement(t.exports.Fragment,null,s.children)},Te=s=>t.exports.createElement(y,_({style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},s),s.children),j=t.exports.lazy(()=>i(()=>import("./index-4622fea5.js").then(function(s){return s.i}),["static/js/index-4622fea5.js","static/css/index-82cb5034.css","static/js/vendor-d77eef1c.js","static/js/index-e1bb8195.js","static/js/index-7212b9a5.js","static/js/page-header-6125e98d.js"])),Oe=t.exports.lazy(()=>i(()=>import("./index-c0f96840.js"),["static/js/index-c0f96840.js","static/css/index-dfa115de.css","static/js/vendor-d77eef1c.js","static/js/index-4622fea5.js","static/css/index-82cb5034.css","static/js/index-e1bb8195.js","static/js/index-7212b9a5.js","static/js/page-header-6125e98d.js"])),Re=t.exports.lazy(()=>i(()=>import("./index-2264f766.js"),["static/js/index-2264f766.js","static/js/vendor-d77eef1c.js","static/js/index-166cbc43.js","static/css/index-de882e9d.css","static/js/index-2c2055ae.js"])),we=t.exports.lazy(()=>i(()=>import("./index-0f09ef47.js"),["static/js/index-0f09ef47.js","static/css/index-5c5d6c9e.css","static/js/vendor-d77eef1c.js","static/js/cx-e5ad65f0.js","static/js/index-7212b9a5.js"])),Be=t.exports.lazy(()=>i(()=>import("./index-3911fe84.js"),["static/js/index-3911fe84.js","static/css/index-53a9a584.css","static/js/vendor-d77eef1c.js","static/js/index-166cbc43.js","static/css/index-de882e9d.css","static/js/index-2c2055ae.js","static/js/user-list-0b9e1da4.js","static/js/index-e1bb8195.js","static/js/index-7212b9a5.js"])),Ne=t.exports.lazy(()=>i(()=>import("./index-b661069f.js"),["static/js/index-b661069f.js","static/css/index-58ef9436.css","static/js/vendor-d77eef1c.js","static/js/index-15d6d48e.js","static/css/index-d0798fbd.css","static/js/index-7212b9a5.js"])),ke=t.exports.lazy(()=>i(()=>import("./index-ee7142e0.js"),["static/js/index-ee7142e0.js","static/js/vendor-d77eef1c.js"])),je=t.exports.lazy(()=>i(()=>import("./index-e34d74ea.js"),["static/js/index-e34d74ea.js","static/css/index-f9a7894c.css","static/js/page-header-6125e98d.js","static/js/vendor-d77eef1c.js","static/js/cx-e5ad65f0.js","static/js/index-2c2055ae.js","static/js/menu.config-8fdf8917.js"])),qe=t.exports.lazy(()=>i(()=>import("./index-db2544df.js"),["static/js/index-db2544df.js","static/css/index-1925d179.css","static/js/vendor-d77eef1c.js","static/js/index-2bf6b87e.js","static/css/index-2c85953f.css"])),Ue=t.exports.lazy(()=>i(()=>import("./index-bd6953a7.js"),["static/js/index-bd6953a7.js","static/css/index-93aecc91.css","static/js/vendor-d77eef1c.js","static/js/menu.config-8fdf8917.js","static/js/index-2bf6b87e.js","static/css/index-2c85953f.css","static/js/index-15d6d48e.js","static/css/index-d0798fbd.css","static/js/index-7212b9a5.js","static/js/page-header-6125e98d.js","static/js/cx-e5ad65f0.js","static/js/user-list-0b9e1da4.js"])),ze=t.exports.lazy(()=>i(()=>import("./index-40a9a784.js"),["static/js/index-40a9a784.js","static/js/vendor-d77eef1c.js"])),Ve=()=>t.exports.createElement(t.exports.Suspense,{fallback:t.exports.createElement(Te,null)},t.exports.createElement(De,null,t.exports.createElement(Se,null,t.exports.createElement(Y,null,t.exports.createElement(l,{path:"sign",element:t.exports.createElement(qe,null)}),t.exports.createElement(l,{path:"/forget-password",element:t.exports.createElement(ke,null)}),t.exports.createElement(l,{path:"/",element:t.exports.createElement(Ie,null,t.exports.createElement(Ue,null))},t.exports.createElement(l,{index:!0,element:t.exports.createElement(je,null)}),t.exports.createElement(l,{path:"user",element:t.exports.createElement(Ne,null)}),t.exports.createElement(l,{path:"apply"},t.exports.createElement(l,{index:!0,element:t.exports.createElement(Oe,null)}),t.exports.createElement(l,{path:"form",element:t.exports.createElement(j,null)},t.exports.createElement(l,{path:":applyId",element:t.exports.createElement(j,null)}))),t.exports.createElement(l,{path:"upload",element:t.exports.createElement(we,null)}),t.exports.createElement(l,{path:"process"},t.exports.createElement(l,{index:!0,element:t.exports.createElement(Re,null)}),t.exports.createElement(l,{path:"initiate-process",element:t.exports.createElement(Be,null)})),t.exports.createElement(l,{path:"*",element:t.exports.createElement(ze,null)})),t.exports.createElement(l,{path:"*",element:t.exports.createElement(v,{to:"/sign"})})))));const q={required:"${label}\u4E0D\u80FD\u4E3A\u7A7A"},U=[{required:!0}],lt={labelCol:{span:4,offset:2},wrapperCol:{span:12},scrollToFirstError:!0,requiredMark:!1,labelWrap:!0,validateMessages:q},it=s=>s&&s>b().endOf("day"),ct=s=>s&&s<b().startOf("day"),pt=s=>s>b().endOf("year"),Me=[{text:"\u6210\u529F",status:"success",color:"green"},{text:"\u5931\u8D25",status:"fail",color:"#f5222d"},{text:"\u6CE8\u610F",status:"warning",color:"volcano"},{text:"\u9519\u8BEF",status:"error",color:"red"},{text:"\u5B8C\u6210",status:"finish",color:"#aaa"}],$e=s=>{const{children:e,status:r,text:o}=s,n=t.exports.useMemo(()=>Me.find(a=>a.status===r),[r]);return t.exports.createElement(Z.Ribbon,{text:o||(n==null?void 0:n.text),color:n==null?void 0:n.color},e)};var F={"feedback-button":"xupt_sHsstyle-module__feedback-button__yHC6y","feedback-button-text":"xupt_sHsstyle-module__feedback-button-text__sxFR3","error-info":"xupt_sHsstyle-module__error-info__2kaoN"};const{Paragraph:z}=oe,He=[{label:"\u9875\u9762\u663E\u793A",value:"page_display"},{label:"\u8868\u5355\u4EA4\u4E92",value:"form_interaction"},{label:"\u4FE1\u606F\u63D0\u4EA4",value:"information_submission"},{label:"\u6570\u636E\u9519\u8BEF",value:"data_error"},{label:"\u7ED3\u679C\u65E0\u54CD\u5E94/\u54CD\u5E94\u5F02\u5E38",value:"result_response"}],Je=()=>{const[s]=x.useForm(),[e,r]=t.exports.useState(!1),[o,n]=t.exports.useState(!1),a=async()=>{await s.validateFields();try{n(!0);const u=s.getFieldsValue(!0)}catch{S.error("\u53CD\u9988\u63D0\u4EA4\u5931\u8D25")}finally{n(!1)}};return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(ee,{className:F["feedback-button"],shape:"circle",disabled:e,icon:t.exports.createElement(te,null),onClick:()=>r(!e)},t.exports.createElement("div",{className:F["feedback-button-text"]},"\u95EE\u9898\u53CD\u9988")),t.exports.createElement(re,{forceRender:!0,visible:e,title:"\u95EE\u9898\u53CD\u9988",onCancel:()=>r(!!o),cancelButtonProps:{disabled:o},onOk:a,confirmLoading:o},t.exports.createElement($e,{status:"error",text:"\u9519\u8BEF\u5B9A\u4F4D"},t.exports.createElement("div",{className:F["error-info"]},t.exports.createElement(z,null,t.exports.createElement(A,{orientation:"left"},"\u7528\u6237\u8BBE\u5907\u63CF\u8FF0\uFF1A"),t.exports.createElement("blockquote",null,navigator.userAgent)),t.exports.createElement(z,null,t.exports.createElement(A,{orientation:"left"},"\u5F53\u524D\u9875\u9762\u7F51\u5740\uFF1A"),t.exports.createElement("blockquote",null,location.href)))),t.exports.createElement(se,null,t.exports.createElement(x,{validateMessages:q,form:s,requiredMark:!1},t.exports.createElement(x.Item,{name:"type",label:"\u95EE\u9898\u7C7B\u578B",rules:U},t.exports.createElement(ne,{options:He})),t.exports.createElement(x.Item,{name:"title",label:"\u95EE\u9898\u7B80\u8FF0",rules:U},t.exports.createElement(I,null)),t.exports.createElement(x.Item,{label:"\u95EE\u9898\u8BE6\u8FF0",name:"description"},t.exports.createElement(I.TextArea,null))))))},Ke=T({name:"user",initialState:{},reducers:{}});var We=Ke.reducer;const Ge=T({name:"process",initialState:{},reducers:{}});var Qe=Ge.reducer;const Xe=ae({reducer:{user:We,process:Qe},devTools:!0});function Ye(){return t.exports.createElement("div",{className:"app"},t.exports.createElement(ue,{store:Xe},t.exports.createElement(Je,null),t.exports.createElement(le,null,t.exports.createElement(Ve,null))),"?")}ie.render(O.createElement(ce,null,O.createElement(Ye,null)),document.getElementById("root"));export{g as A,tt as E,Te as P,ye as a,lt as b,p as c,it as d,ct as e,ve as f,ut as g,rt as h,pt as i,st as j,nt as k,ot as l,at as p,U as r,E as s,k as u,q as v};
//# sourceMappingURL=index-89cb7035.js.map
