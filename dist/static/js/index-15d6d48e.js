var h=Object.defineProperty,_=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var g=(u,a,r)=>a in u?h(u,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[a]=r,p=(u,a)=>{for(var r in a||(a={}))C.call(a,r)&&g(u,r,a[r]);if(f)for(var r of f(a))S.call(a,r)&&g(u,r,a[r]);return u},x=(u,a)=>_(u,D(a));import{u as k,v as w,r as l,i as j,j as N}from"./index-89cb7035.js";import{r as e,F as t,a9 as L,aa as M,d as O,U as T,I as s,e as V,Q as G,G as H,J as P,m as c}from"./vendor-d77eef1c.js";import{b as R}from"./index-7212b9a5.js";var F={"upload-avatar-box":"xupt_sHsstyle-module__upload-avatar-box__lgvU4","upload-avatar-text":"xupt_sHsstyle-module__upload-avatar-text__1cUIE"};const q=[{label:"\u5B66\u7855",value:"bachelor_degree",key:"bachelor_degree"},{label:"\u4E13\u7855",value:"profession_degree",key:"profession_degree"}],J=()=>e.exports.createElement(t.Item,{noStyle:!0,name:"student"},e.exports.createElement(t.Item,{name:["student","college"],label:"\u5B66\u9662",rules:l},e.exports.createElement(s,null)),e.exports.createElement(t.Item,{name:["student","professional"],label:"\u4E13\u4E1A",rules:l},e.exports.createElement(s,null)),e.exports.createElement(t.Item,{name:["student","grade"],label:"\u5E74\u7EA7",rules:l},e.exports.createElement(G,{picker:"year",suffixIcon:"\u7EA7",disabledDate:j})),e.exports.createElement(t.Item,{name:["student","class"],label:"\u73ED\u7EA7",rules:l},e.exports.createElement(H,{min:1,precision:0,addonAfter:"\u73ED"})),e.exports.createElement(t.Item,{name:["student","type"],label:"\u7855\u58EB\u7C7B\u578B",rules:l},e.exports.createElement(P.Group,{buttonStyle:"solid",options:q,optionType:"button"}))),Q=()=>e.exports.createElement(t.Item,{noStyle:!0,name:"manager"},e.exports.createElement(t.Item,{name:["manager","department"],label:"\u90E8\u95E8/\u5B66\u9662",rules:l},e.exports.createElement(s,{placeholder:"\u90E8\u95E8"})),e.exports.createElement(t.Item,{name:["manager","office"],label:"\u529E\u516C\u5BA4/\u7EC4",rules:l},e.exports.createElement(s,{placeholder:"\u529E\u516C\u5BA4"})),e.exports.createElement(t.Item,{name:["manager","position"],label:"\u804C\u4F4D",rules:l},e.exports.createElement(s,{placeholder:"\u804C\u4F4D"}))),v=u=>{var b;const{formValue:a}=u,[r]=t.useForm(),{user:n}=k(),[d,y]=e.exports.useState(a.avatar),[E,m]=e.exports.useState(!1),[i,B]=e.exports.useState(null),I=async()=>{if(!!i)try{m(!0);const o=await R(i);y(`http://127.0.0.1:8096${o}`),c.success("\u4E0A\u4F20\u6210\u529F")}catch{c.error("\u4E0A\u4F20\u5931\u8D25")}finally{m(!1)}},A=async()=>{try{m(!0);const o=await r.validateFields();await N(p({avatar:d},o)),c.success("\u5B8C\u5584\u4E2A\u4EBA\u4FE1\u6210\u529F")}catch{c.error("\u5B8C\u5584\u4E2A\u4EBA\u4FE1\u606F\u5931\u8D25")}finally{m(!1)}};e.exports.useMemo(()=>{I()},[i]);const U=e.exports.createElement("div",null,E?e.exports.createElement(L,null):e.exports.createElement(M,null),e.exports.createElement("div",{className:F["upload-avatar-text"]},"\u4E0A\u4F20\u5934\u50CF"));return e.exports.createElement(t,{form:r,initialValues:x(p({},n),{student:x(p({},n.student),{grade:O(((b=n.student)==null?void 0:b.grade)||void 0)})}),validateMessages:w,labelAlign:"left",labelCol:{span:6,offset:2},wrapperCol:{span:12}},e.exports.createElement(T,{listType:"picture-card",showUploadList:!1,className:F["upload-avatar-box"],maxCount:1,beforeUpload:o=>(B(o),!1)},d?e.exports.createElement("img",{src:d,alt:"avatar",style:{width:"100%"}}):U),e.exports.createElement(t.Item,{name:"name",label:"\u59D3\u540D",rules:l},e.exports.createElement(s,{placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u59D3\u540D"})),e.exports.createElement(t.Item,{name:"phone",label:"\u624B\u673A\u53F7",rules:l},e.exports.createElement(s,{type:"tel",placeholder:"\u8BF7\u586B\u5199\u4F60\u7684\u5E38\u7528\u624B\u673A\u53F7"})),e.exports.createElement(t.Item,{name:"user_id",label:"\u5B66\u53F7/\u5DE5\u53F7",rules:l},e.exports.createElement(s,{placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5B66\u53F7/\u5DE5\u53F7"})),n.identity==="manager"?e.exports.createElement(Q,null):e.exports.createElement(J,null),e.exports.createElement(V,{type:"primary",block:!0,loading:E,disabled:E,onClick:A,className:F["submit-btn"]},"\u66F4\u65B0\u4E2A\u4EBA\u4FE1\u606F"))};v.defaultProps={formValue:{avatar:"",name:"",phone:"",user_id:""}};var W=e.exports.memo(v);export{W as U};
//# sourceMappingURL=index-15d6d48e.js.map
