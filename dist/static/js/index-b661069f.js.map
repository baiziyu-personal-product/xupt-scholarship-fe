{"version":3,"file":"index-b661069f.js","sources":["../../../src/pages/user-center/components/user-info.tsx","../../../src/pages/user-center/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Descriptions, Badge, Button, Modal, Tag, Card } from 'antd';\nimport { EditFilled } from '@ant-design/icons';\nimport style from '../style.module.less';\nimport UpdateUserInfo from '@/components/update-user-info';\nimport { useAuth } from '@/context/auth.context';\nimport moment from 'moment';\n\ninterface IProps {\n\n}\n\nconst UserInfo: React.FC<IProps> = (props) => {\n  const { user } = useAuth();\n  const { student, manager, ...baseInfo } = user;\n  const [modalVisible, setModalVisible] = React.useState(false);\n  const detailInfo = React.useMemo(() => baseInfo.identity === 'manager' ? manager : student, [user])\n  const isStudent = React.useMemo(() => baseInfo.identity !== 'manager', [baseInfo]);\n  const positionInfo = React.useMemo(\n    () => {\n      if (baseInfo.identity === 'manager') {\n        const tempInfo = detailInfo as unknown as IManagerInfo;\n        return `${tempInfo.department} - ${tempInfo.office} - ${tempInfo.position}`\n      }\n      const tempInfo = detailInfo as unknown as IStudentInfo;\n      return `${tempInfo.college} - ${tempInfo.professional} 『 ${moment(tempInfo.grade).format(\"YYYY\")} 级（${tempInfo.class}） 班 』`\n    },\n    [baseInfo, detailInfo]);\n\n  const showModal = () => {\n    setModalVisible(true);\n  }\n  const closeModal = () => {\n    setModalVisible(false);\n  }\n\n  return (\n    <div className={style['user-info']}>\n      <Modal\n        footer={null}\n        onCancel={closeModal}\n        title=\"完善用户信息\"\n        visible={modalVisible}>\n        <UpdateUserInfo\n          formValue={user}\n        />\n      </Modal>\n      <section className={style['avatar-card']}>\n        <div\n          className={style['avatar-box']}\n          style={{\n            backgroundImage: `url(${baseInfo.avatar})`\n          }}\n        >\n        </div>\n        <Button\n          type=\"primary\"\n          icon={<EditFilled />}\n          onClick={showModal}\n          block\n        >编辑个人信息</Button>\n      </section>\n      <Descriptions\n        title=\"我的信息\"\n        bordered\n      >\n        <Descriptions.Item label=\"姓名\">{baseInfo.name}</Descriptions.Item>\n        <Descriptions.Item label={isStudent ? \"学号\" : \"工号\"}>{baseInfo.user_id}</Descriptions.Item>\n        <Descriptions.Item label=\"邮箱\">{baseInfo.email}</Descriptions.Item>\n        <Descriptions.Item label=\"手机号\">{baseInfo.phone}</Descriptions.Item>\n        <Descriptions.Item label={isStudent ? \"班级\" : \"职位\"} span={2}>\n          {positionInfo}\n        </Descriptions.Item>\n        {\n          user.identity !== 'manager' && (\n            <Descriptions.Item label=\"学位类型\" span={3}>\n              {(detailInfo as IStudentInfo).type === 'bachelor_degree' ? <Tag color=\"geekblue\">学硕</Tag> : <Tag color=\"green\">专硕</Tag>}\n            </Descriptions.Item>\n          )\n        }\n        <Descriptions.Item label=\"资料查看\">\n          <Card>\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/zs.htm\" target=\"_blank\" title=\"招生\">招生</a></Card.Grid>\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/py.htm\" title=\"培养\">培养</a></Card.Grid>\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/xw.htm\" title=\"学位\">学位</a></Card.Grid>\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/xk.htm\" title=\"学科\">学科</a></Card.Grid>\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/xsgl.htm\" title=\"学生管理\">学生管理</a></Card.Grid>\n            <Card.Grid><a href=\"http://gr.xupt.edu.cn/xbwz/zlxz/gjzc.htm\" title=\"国家政策\">国家政策</a></Card.Grid>\n          </Card>\n        </Descriptions.Item>\n      </Descriptions>\n    </div>\n  )\n};\n\nexport default UserInfo;","import { useAuth } from '@/context/auth.context';\r\nimport { Card } from 'antd';\r\nimport * as React from 'react';\r\nimport UserInfo from './components/user-info';\r\n\r\nexport interface IUserInfo extends IUser {\r\n\r\n}\r\n\r\nconst UserCenter: React.FC = () => {\r\n  return (\r\n    <Card>\r\n      <UserInfo />\r\n    </Card>\r\n  )\r\n};\r\n\r\nexport default UserCenter;"],"names":["React.useState","React.useMemo"],"mappings":"uoBAYA,KAAM,GAA6B,AAAC,GAAU,MACtC,CAAE,QAAS,IACyB,IAAlC,WAAS,WAAyB,EAAb,IAAa,EAAb,CAArB,UAAS,YACX,CAAC,EAAc,GAAmBA,mBAAe,IACjD,EAAaC,kBAAc,IAAM,EAAS,WAAa,UAAY,EAAU,EAAS,CAAC,IACvF,EAAYA,kBAAc,IAAM,EAAS,WAAa,UAAW,CAAC,IAClE,EAAeA,kBACnB,IAAM,IACA,EAAS,WAAa,UAAW,MAC7B,GAAW,QACV,GAAG,EAAS,gBAAgB,EAAS,YAAY,EAAS,gBAE7D,GAAW,QACV,GAAG,EAAS,aAAa,EAAS,uBAAkB,EAAO,EAAS,OAAO,OAAO,uBAAa,EAAS,6BAEjH,CAAC,EAAU,IAEP,EAAY,IAAM,GACN,KAEZ,EAAa,IAAM,GACP,oCAIf,MAAD,CAAK,UAAW,EAAM,sCACnB,EAAD,CACE,OAAQ,KACR,SAAU,EACV,MAAM,uCACN,QAAS,2BACR,EAAD,CACE,UAAW,6BAGd,UAAD,CAAS,UAAW,EAAM,wCACvB,MAAD,CACE,UAAW,EAAM,cACjB,MAAO,CACL,gBAAiB,OAAO,EAAS,qCAIpC,EAAD,CACE,KAAK,UACL,6BAAO,EAAD,MACN,QAAS,EACT,MAAK,IACN,iEAEF,EAAD,CACE,MAAM,2BACN,SAAQ,4BAEP,EAAa,KAAd,CAAmB,MAAM,gBAAM,EAAS,8BACvC,EAAa,KAAd,CAAmB,MAAO,EAAY,eAAO,gBAAO,EAAS,iCAC5D,EAAa,KAAd,CAAmB,MAAM,gBAAM,EAAS,+BACvC,EAAa,KAAd,CAAmB,MAAM,sBAAO,EAAS,+BACxC,EAAa,KAAd,CAAmB,MAAO,EAAY,eAAO,eAAM,KAAM,GACtD,GAGD,EAAK,WAAa,mCACf,EAAa,KAAd,CAAmB,MAAM,2BAAO,KAAM,GAClC,EAA4B,OAAS,0CAAqB,EAAD,CAAK,MAAM,YAAW,wCAAY,EAAD,CAAK,MAAM,SAAQ,yCAIpH,EAAa,KAAd,CAAmB,MAAM,oDACtB,EAAD,6BACG,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,OAAO,SAAS,MAAM,gBAAK,yCACtF,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,MAAM,gBAAK,yCACtE,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,MAAM,gBAAK,yCACtE,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,yCAAyC,MAAM,gBAAK,yCACtE,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,2CAA2C,MAAM,4BAAO,qDAC1E,EAAK,KAAN,6BAAY,IAAD,CAAG,KAAK,2CAA2C,MAAM,4BAAO,kCC9EjF,EAAuB,4BAExB,EAAD,6BACG,EAAD"}